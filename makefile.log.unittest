CXX = g++
CFLAGS = -Wall -Werror -std=c++11 -c


INCLUDE = -I/usr/local/include
LDFLAGS = -L/usr/local/lib
LDLIBS =

SOURCES = src/shared/vars.cpp src/log/log.cpp src/test/log_test.cpp
OBJECTS=$(SOURCES:.cpp=.o)
EXECUTABLE=bin/log.test

# XML TEST



# $(removeobj)
define removeobj
	@ find -name '*.o' |					\
	awk 'BEGIN { print "Moving objs"; }		\
				{ 							\
 				print "Moving " $$1 "...";		\
				system("mv " $$1 " obj/");	\
				} '							
endef



all: $(SOURCES) $(EXECUTABLE)

$(EXECUTABLE): $(OBJECTS)
	@ if ! test -d obj; then echo "obj directory not found creating..."; mkdir obj; fi
	@ if ! test -d bin; then echo "bin directory not found creating..."; mkdir bin; fi
	$(CXX) $(LDFLAGS) $(OBJECTS) -o $@  $(LDLIBS)
	$(call removeobj)
	@ echo Compiling finished......OOO.....

.cpp.o:
	$(CXX) $(CFLAGS) $< -o $@

clean:
	rm -rf bin
	rm -rf obj
